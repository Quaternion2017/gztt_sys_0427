{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\src\\\\pages\\\\rbac\\\\rbac.js\";\nimport React, { Component } from 'react';\nimport { Tabs, Select, Table, Row, Col, Button, Input, Modal, Form, Cascader } from 'antd';\nimport './rbac.less';\nimport province from '../../../mock/geographic/province.json';\nimport city from '../../../mock/geographic/city.json';\nimport district from '../../../mock/geographic/district.json';\nimport { sysUserSave } from \"../../services/api\";\nvar Search = Input.Search;\nvar TabPane = Tabs.TabPane;\nvar Option = Select.Option;\nvar columns = [{\n  title: '编号',\n  dataIndex: 'id',\n  render: function render(name) {\n    return \"\".concat(name.first, \" \").concat(name.last);\n  }\n}, {\n  title: '账号',\n  dataIndex: '',\n  render: function render(name) {\n    return \"\".concat(name.first, \" \").concat(name.last);\n  }\n}, {\n  title: '代理地区',\n  dataIndex: '',\n  render: function render(name) {\n    return \"\".concat(name.province, \" \").concat(name.city, \" \").concat(name.district);\n  }\n}, {\n  title: '角色',\n  dataIndex: ''\n}, {\n  title: '创建时间',\n  dataIndex: ''\n}, {\n  title: '状态',\n  dataIndex: ''\n}, {\n  title: '最近登录时间',\n  dataIndex: ''\n}, {\n  title: '操作',\n  dataIndex: ''\n}];\nvar formItemLayout = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 8\n  }\n};\n\nvar rbac =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(rbac, _Component);\n\n  function rbac(props) {\n    var _this;\n\n    _classCallCheck(this, rbac);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(rbac).call(this, props));\n    _this.state = {\n      tabPosition: 'left',\n      accountData: [],\n      pagination: {\n        total: 50,\n        pageSizeOptions: [10, 20, 30, 40, 50]\n      },\n      visible: false\n    };\n\n    _this.getProvince = function () {\n      //获取省市\n      var result = [];\n\n      for (var i = 0; i < province.length; i++) {\n        var obj = province[i];\n        var citys = city[obj.id];\n        var p_c = [];\n\n        if (citys !== undefined) {\n          for (var a = 0; a < citys.length; a++) {\n            var obj_c = citys[a];\n\n            if (obj_c.province === obj.name) {\n              var _pro = {\n                value: obj_c.id,\n                label: obj_c.name\n              };\n              p_c.push(_pro);\n            }\n          }\n        }\n\n        var pro = {\n          value: obj.id,\n          label: obj.name,\n          children: p_c\n        };\n        result.push(pro);\n      }\n\n      _this.setState({\n        options: result\n      });\n    };\n\n    _this.addUser = function (e) {\n      //添加用户\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var data = {\n            account: values.account,\n            province: values.p_c[0],\n            city: values.p_c[1],\n            roleid: values.roleid[0],\n            name: values.name,\n            phone: values.phone\n          };\n          var result = sysUserSave(data);\n          var timeout = setInterval(function () {\n            console.log(result);\n\n            if (result != undefined) {\n              console.log(\"stop\");\n              clearInterval(timeout);\n            }\n          }, 500);\n        }\n      });\n\n      console.log(e);\n\n      _this.setState({\n        loading: true\n      });\n    };\n\n    _this.showModal = function () {\n      _this.getRole();\n\n      _this.setState({\n        visible: true,\n        loading: false\n      });\n    };\n\n    _this.getRole = function () {\n      var roles = [{\n        label: \"代理商\",\n        value: 1\n      }, {\n        label: \"企业用户\",\n        value: 2\n      }];\n\n      _this.setState({\n        roles: roles\n      });\n    };\n\n    _this.handleCancel = function (e) {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleSelectChange = function (value) {\n      _this.props.form.setFieldsValue({\n        note: \"Hi, \".concat(value === 'male' ? 'man' : 'lady', \"!\")\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(rbac, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getProvince();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          tabs = _this$state.tabs,\n          options = _this$state.options,\n          roles = _this$state.roles,\n          loading = _this$state.loading;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        style: {\n          background: '#fff',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: this.state.visible,\n        onOk: this.addUser,\n        onCancel: this.handleCancel,\n        closable: false,\n        destroyOnClose: true,\n        footer: [React.createElement(Button, {\n          key: \"back\",\n          onClick: this.handleCancel,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\"), React.createElement(Button, {\n          key: \"submit\",\n          type: \"primary\",\n          loading: loading,\n          onClick: this.addUser,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, \"\\u63D0\\u4EA4\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(Form.Item, Object.assign({\n        label: \"\\u8D26\\u53F7\",\n        required: true\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), getFieldDecorator('account', {\n        rules: [{\n          required: true,\n          message: '请填写您的账号'\n        }]\n      })(React.createElement(Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u8D26\\u53F7\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({\n        label: \"\\u4EE3\\u7406\\u5730\\u533A\",\n        required: true\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), getFieldDecorator('p_c', {\n        rules: [{\n          required: true,\n          message: '请选择您所代理城市'\n        }]\n      })(React.createElement(Cascader, {\n        options: options,\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u4EE3\\u7406\\u5730\\u533A\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({\n        label: \"\\u89D2\\u8272\",\n        required: true\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), getFieldDecorator('roleid', {\n        rules: [{\n          required: true,\n          message: '请选择角色'\n        }]\n      })(React.createElement(Cascader, {\n        options: roles,\n        placeholder: \"\\u8BF7\\u9009\\u62E9\\u89D2\\u8272\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({\n        label: \"\\u59D3\\u540D\",\n        required: true\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), getFieldDecorator('name', {\n        rules: [{\n          required: true,\n          message: '您的姓名不能为空呦'\n        }]\n      })(React.createElement(Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u8054\\u7CFB\\u4EBA\\u59D3\\u540D\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({\n        label: \"\\u624B\\u673A\\u53F7\",\n        required: true\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), getFieldDecorator('phone', {\n        rules: [{\n          required: true,\n          message: '请输入您的11位手机号码'\n        }]\n      })(React.createElement(Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u8054\\u7CFB\\u65B9\\u5F0F\",\n        type: \"tel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }))))), React.createElement(Tabs, {\n        tabPosition: this.state.tabPosition,\n        tabBarGutter: 10,\n        animated: true,\n        style: {\n          height: '75vh',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(TabPane, {\n        tab: \"\\u8D26\\u53F7\\u7BA1\\u7406\",\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tabPane\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(Row, {\n        gutter: 32,\n        style: {\n          padding: '1rem  0 1rem 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 12,\n        style: {\n          paddingLeft: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"  \", React.createElement(Search, {\n        placeholder: \"\\u8D26\\u53F7\\u3001\\u89D2\\u8272\\u3001\\u7F16\\u53F7\\u67E5\\u8BE2\",\n        onSearch: function onSearch(value) {\n          return console.log(value);\n        },\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      })), React.createElement(Col, {\n        span: 11,\n        style: {\n          textAlign: 'right',\n          paddingRight: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\"))), React.createElement(Row, {\n        gutter: 32,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(Table, {\n        columns: columns,\n        rowKey: function rowKey(record) {\n          return record.login.uuid;\n        },\n        pagination: this.state.pagination,\n        loading: this.state.loading,\n        onChange: this.handleTableChange,\n        style: {\n          marginRight: '24px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      })))), React.createElement(TabPane, {\n        tab: \"\\u529F\\u80FD\\u6743\\u9650\",\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }), React.createElement(TabPane, {\n        tab: \"\\u6570\\u636E\\u6743\\u9650\",\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return rbac;\n}(Component);\n\nexport default Form.create()(rbac);","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\3.公司项目\\4.光子头条\\gztt_sys\\src\\pages\\rbac\\rbac.js"],"names":["React","Component","Tabs","Select","Table","Row","Col","Button","Input","Modal","Form","Cascader","province","city","district","sysUserSave","Search","TabPane","Option","columns","title","dataIndex","render","name","first","last","formItemLayout","labelCol","span","wrapperCol","rbac","props","state","tabPosition","accountData","pagination","total","pageSizeOptions","visible","getProvince","result","i","length","obj","citys","id","p_c","undefined","a","obj_c","pro","value","label","push","children","setState","options","addUser","e","preventDefault","form","validateFields","err","values","data","account","roleid","phone","timeout","setInterval","console","log","clearInterval","loading","showModal","getRole","roles","handleCancel","handleSelectChange","setFieldsValue","note","tabs","getFieldDecorator","background","height","rules","required","message","width","padding","paddingLeft","textAlign","paddingRight","record","login","uuid","handleTableChange","marginRight","create"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Tabs, Select, Table, Row, Col, Button, Input, Modal, Form, Cascader } from 'antd';\r\nimport './rbac.less';\r\nimport province from '../../../mock/geographic/province.json';\r\nimport city from '../../../mock/geographic/city.json';\r\nimport district from '../../../mock/geographic/district.json';\r\nimport { sysUserSave } from \"../../services/api\";\r\nconst Search = Input.Search;\r\nconst TabPane = Tabs.TabPane;\r\nconst Option = Select.Option;\r\nconst columns = [\r\n  {\r\n    title: '编号',\r\n    dataIndex: 'id',\r\n    render: name => `${name.first} ${name.last}`\r\n  }, {\r\n    title: '账号',\r\n    dataIndex: '',\r\n    render: name => `${name.first} ${name.last}`\r\n  }, {\r\n    title: '代理地区',\r\n    dataIndex: '',\r\n    render: name => `${name.province} ${name.city} ${name.district}`\r\n  }, {\r\n    title: '角色',\r\n    dataIndex: '',\r\n  }, {\r\n    title: '创建时间',\r\n    dataIndex: '',\r\n  }, {\r\n    title: '状态',\r\n    dataIndex: '',\r\n  }, {\r\n    title: '最近登录时间',\r\n    dataIndex: '',\r\n  }, {\r\n    title: '操作',\r\n    dataIndex: '',\r\n  }];\r\nconst formItemLayout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 8 },\r\n};\r\n\r\nclass rbac extends Component {\r\n  state = {\r\n    tabPosition: 'left',\r\n    accountData: [],\r\n    pagination: {\r\n      total: 50,\r\n      pageSizeOptions: [10, 20, 30, 40, 50]\r\n    },\r\n    visible: false\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getProvince();\r\n  }\r\n\r\n  getProvince = () => { //获取省市\r\n    var result = []\r\n\r\n    for (let i = 0; i < province.length; i++) {\r\n      var obj = province[i];\r\n      var citys = city[obj.id];\r\n      var p_c = [];\r\n      if (citys !== undefined) {\r\n        for (let a = 0; a < citys.length; a++) {\r\n          var obj_c = citys[a];\r\n          if (obj_c.province === obj.name) {\r\n            const pro = {\r\n              value: obj_c.id,\r\n              label: obj_c.name\r\n            }\r\n            p_c.push(pro);\r\n          }\r\n        }\r\n      }\r\n      const pro = {\r\n        value: obj.id,\r\n        label: obj.name,\r\n        children: p_c\r\n      }\r\n      result.push(pro);\r\n    }\r\n    this.setState({\r\n      options: result\r\n    })\r\n  }\r\n  addUser = (e) => { //添加用户\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        var data = {\r\n          account: values.account,\r\n          province: values.p_c[0],\r\n          city: values.p_c[1],\r\n          roleid: values.roleid[0],\r\n          name: values.name,\r\n          phone: values.phone\r\n        };\r\n        var result = sysUserSave(data);\r\n        var timeout=setInterval(() => {\r\n          console.log(result);\r\n          if(result!=undefined){\r\n            console.log(\"stop\");\r\n            clearInterval(timeout);\r\n          }\r\n        }, 500);\r\n      }\r\n    });\r\n    console.log(e);\r\n    this.setState({\r\n      loading: true\r\n    });\r\n  }\r\n\r\n  showModal = () => {\r\n    this.getRole();\r\n    this.setState({\r\n      visible: true,\r\n      loading: false\r\n    });\r\n  }\r\n\r\n  getRole = () => {\r\n    var roles = [{\r\n      label: \"代理商\",\r\n      value: 1\r\n    }, {\r\n      label: \"企业用户\",\r\n      value: 2\r\n    }];\r\n    this.setState({\r\n      roles: roles\r\n    })\r\n  }\r\n\r\n\r\n\r\n  handleCancel = (e) => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  }\r\n  handleSelectChange = (value) => {\r\n    this.props.form.setFieldsValue({\r\n      note: `Hi, ${value === 'male' ? 'man' : 'lady'}!`,\r\n    });\r\n  }\r\n  render() {\r\n    const { tabs, options, roles, loading } = this.state;\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <div style={{ background: '#fff', height: '100%' }}>\r\n        {/* 添加、更新用户 */}\r\n        <Modal\r\n          visible={this.state.visible}\r\n          onOk={this.addUser}\r\n          onCancel={this.handleCancel}\r\n          closable={false}\r\n          destroyOnClose={true}\r\n          footer={[\r\n            <Button key=\"back\" onClick={this.handleCancel}>取消</Button>,\r\n            <Button key=\"submit\" type=\"primary\" loading={loading} onClick={this.addUser}>\r\n              提交\r\n            </Button>,\r\n          ]}\r\n        >\r\n          <Form >\r\n            <Form.Item\r\n              label=\"账号\"\r\n              required\r\n              {...formItemLayout}\r\n            >\r\n              {getFieldDecorator('account', {\r\n                rules: [{ required: true, message: '请填写您的账号' }],\r\n              })(\r\n                <Input placeholder=\"请输入账号\" type=\"text\" />\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"代理地区\"\r\n              required\r\n              {...formItemLayout}\r\n            >\r\n              {getFieldDecorator('p_c', {\r\n                rules: [{ required: true, message: '请选择您所代理城市' }],\r\n              })(\r\n                <Cascader options={options} placeholder=\"请选择代理地区\" />\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"角色\"\r\n              required\r\n              {...formItemLayout}\r\n            >\r\n              {getFieldDecorator('roleid', {\r\n                rules: [{ required: true, message: '请选择角色' }],\r\n              })(\r\n                <Cascader options={roles} placeholder=\"请选择角色\" />\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"姓名\"\r\n              required\r\n              {...formItemLayout}\r\n            >\r\n              {getFieldDecorator('name', {\r\n                rules: [{ required: true, message: '您的姓名不能为空呦' }],\r\n              })(\r\n                <Input placeholder=\"请输入联系人姓名\" type=\"text\" />\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"手机号\"\r\n              required\r\n              {...formItemLayout}\r\n            >\r\n              {getFieldDecorator('phone', {\r\n                rules: [{ required: true, message: '请输入您的11位手机号码' }],\r\n              })(\r\n                <Input placeholder=\"请输入联系方式\" type=\"tel\" />\r\n              )}\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n        <Tabs tabPosition={this.state.tabPosition} tabBarGutter={10} animated style={{ height: '75vh', width: '100%' }}>\r\n          <TabPane tab=\"账号管理\" key=\"1\">\r\n            <div className=\"tabPane\">\r\n              <Row gutter={32} style={{ padding: '1rem  0 1rem 0' }}>\r\n                <Col span={12} style={{ paddingLeft: '0' }}>  <Search\r\n                  placeholder=\"账号、角色、编号查询\"\r\n                  onSearch={value => console.log(value)}\r\n                  style={{ width: 200 }}\r\n                /></Col>\r\n                <Col span={11} style={{ textAlign: 'right', paddingRight: '0' }}><Button type=\"primary\" onClick={this.showModal}>添加</Button></Col>\r\n              </Row>\r\n              <Row gutter={32}>\r\n                <Table\r\n                  columns={columns}\r\n                  rowKey={record => record.login.uuid}\r\n                  pagination={this.state.pagination}\r\n                  loading={this.state.loading}\r\n                  onChange={this.handleTableChange}\r\n                  style={{ marginRight: '24px' }}\r\n                />\r\n              </Row>\r\n            </div>\r\n          </TabPane>\r\n          <TabPane tab=\"功能权限\" key=\"3\">\r\n\r\n          </TabPane>\r\n          <TabPane tab=\"数据权限\" key=\"2\">\r\n\r\n          </TabPane>\r\n        </Tabs>\r\n      </div >\r\n    )\r\n  }\r\n}\r\nexport default Form.create()(rbac);"]},"metadata":{},"sourceType":"module"}