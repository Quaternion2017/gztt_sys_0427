{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\src\\\\pages\\\\rbac\\\\rbac.js\";\nimport React, { Component } from 'react';\nimport { Tabs, Select, Table, Row, Col, Button, Input, Modal, Form, Cascader } from 'antd';\nimport './rbac.less';\nimport province from '../../mock/geographic/province.json';\nimport city from '../../mock/geographic/city.json';\nimport district from '../../mock/geographic/district.json';\nimport apiRequest from '../../servers/api/apiRequest';\nvar Search = Input.Search;\nvar TabPane = Tabs.TabPane;\nvar Option = Select.Option;\nvar columns = [{\n  title: '编号',\n  dataIndex: 'id'\n}, {\n  title: '账号',\n  dataIndex: 'account'\n}, {\n  title: '角色',\n  dataIndex: 'role'\n}, {\n  title: '创建时间',\n  dataIndex: 'createTime'\n}, {\n  title: '状态',\n  dataIndex: 'state'\n}, {\n  title: '最近登录时间',\n  dataIndex: 'lastTime'\n}, {\n  title: '操作',\n  dataIndex: ''\n}];\nvar formItemLayout = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 8\n  }\n};\n\nvar rbac =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(rbac, _Component);\n\n  function rbac(props) {\n    var _this;\n\n    _classCallCheck(this, rbac);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(rbac).call(this, props));\n    _this.state = {\n      tabPosition: 'left',\n      accountData: [],\n      pagination: {\n        total: 50,\n        pageSizeOptions: [10, 20, 30, 40, 50]\n      },\n      size: 10,\n      current: 0,\n      visible: false,\n      tabData: []\n    };\n\n    _this.queryPage = function (current, size) {\n      var promise = apiRequest.all(\"adminQueryPage\", \"/\" + current + \"/\" + size, null, \"服务器繁忙请稍后重试！\");\n\n      var thic = _assertThisInitialized(_assertThisInitialized(_this));\n\n      promise.then(function (value) {\n        if (value.code === 1) {\n          var total = value.count;\n          var pageSize = Math.round(total / size);\n          var pageSizeOptions = [];\n\n          for (var i = 0; i < pageSize; i++) {\n            pageSizeOptions.push(size * i);\n          }\n\n          var pagination = {\n            total: total,\n            pageSizeOptions: pageSizeOptions\n          };\n          thic.setState({\n            tabData: value.data,\n            pagination: pagination\n          });\n        }\n      });\n    };\n\n    _this.addUser = function (e) {\n      //添加用户\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          var data = {\n            account: values.account,\n            province: values.p_c[0],\n            city: values.p_c[1],\n            roleid: values.roleid[0],\n            name: values.name,\n            phone: values.phone\n          };\n\n          var thic = _assertThisInitialized(_assertThisInitialized(_this));\n\n          var promise = apiRequest.all(\"saveAdmin\", data, \"添加成功\", null);\n          promise.then(function (value) {\n            if (value.code === 1) {\n              thic.setState({\n                loading: false,\n                visible: false\n              });\n            }\n          });\n        }\n      });\n\n      _this.setState({\n        loading: true\n      });\n    };\n\n    _this.showModal = function () {\n      _this.getRole();\n\n      _this.setState({\n        visible: true,\n        loading: false\n      });\n    };\n\n    _this.getRole = function () {\n      var roles = [{\n        label: \"代理商\",\n        value: 1\n      }, {\n        label: \"企业用户\",\n        value: 2\n      }];\n\n      _this.setState({\n        roles: roles\n      });\n    };\n\n    _this.handleCancel = function (e) {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleSelectChange = function (value) {\n      _this.props.form.setFieldsValue({\n        note: \"Hi, \".concat(value === 'male' ? 'man' : 'lady', \"!\")\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(rbac, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$state = this.state,\n          size = _this$state.size,\n          current = _this$state.current;\n      this.queryPage(current, size);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          tabs = _this$state2.tabs,\n          options = _this$state2.options,\n          roles = _this$state2.roles,\n          loading = _this$state2.loading,\n          tabData = _this$state2.tabData;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        style: {\n          background: '#fff',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: this.state.visible,\n        onOk: this.addUser,\n        onCancel: this.handleCancel,\n        closable: false,\n        destroyOnClose: true,\n        footer: [React.createElement(Button, {\n          key: \"back\",\n          onClick: this.handleCancel,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\"), React.createElement(Button, {\n          key: \"submit\",\n          type: \"primary\",\n          loading: loading,\n          onClick: this.addUser,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"\\u63D0\\u4EA4\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Form.Item, Object.assign({\n        label: \"\\u8D26\\u53F7\",\n        required: true\n      }, formItemLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), getFieldDecorator('account', {\n        rules: [{\n          required: true,\n          message: '请填写您的账号'\n        }]\n      })(React.createElement(Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u8D26\\u53F7\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }))))), React.createElement(Tabs, {\n        tabPosition: this.state.tabPosition,\n        tabBarGutter: 10,\n        animated: true,\n        style: {\n          height: '75vh',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(TabPane, {\n        tab: \"\\u8D26\\u53F7\\u7BA1\\u7406\",\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tabPane\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Row, {\n        gutter: 32,\n        style: {\n          padding: '1rem  0 1rem 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 12,\n        style: {\n          paddingLeft: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"  \", React.createElement(Search, {\n        placeholder: \"\\u8D26\\u53F7\\u3001\\u7F16\\u53F7\\u67E5\\u8BE2\",\n        onSearch: function onSearch(value) {\n          return console.log(value);\n        },\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(Col, {\n        span: 11,\n        style: {\n          textAlign: 'right',\n          paddingRight: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\"))), React.createElement(Row, {\n        gutter: 32,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(Table, {\n        dataSource: tabData,\n        columns: columns,\n        rowKey: function rowKey(record) {\n          return record.login.uuid;\n        },\n        pagination: this.state.pagination,\n        loading: this.state.loading,\n        onChange: this.handleTableChange,\n        style: {\n          marginRight: '24px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      })))), React.createElement(TabPane, {\n        tab: \"\\u529F\\u80FD\\u6743\\u9650\",\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), React.createElement(TabPane, {\n        tab: \"\\u6570\\u636E\\u6743\\u9650\",\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return rbac;\n}(Component);\n\nexport default Form.create()(rbac);","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\3.公司项目\\4.光子头条\\gztt_sys\\src\\pages\\rbac\\rbac.js"],"names":["React","Component","Tabs","Select","Table","Row","Col","Button","Input","Modal","Form","Cascader","province","city","district","apiRequest","Search","TabPane","Option","columns","title","dataIndex","formItemLayout","labelCol","span","wrapperCol","rbac","props","state","tabPosition","accountData","pagination","total","pageSizeOptions","size","current","visible","tabData","queryPage","promise","all","thic","then","value","code","count","pageSize","Math","round","i","push","setState","data","addUser","e","preventDefault","form","validateFields","err","values","account","p_c","roleid","name","phone","loading","showModal","getRole","roles","label","handleCancel","handleSelectChange","setFieldsValue","note","tabs","options","getFieldDecorator","background","height","rules","required","message","width","padding","paddingLeft","console","log","textAlign","paddingRight","record","login","uuid","handleTableChange","marginRight","create"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Tabs, Select, Table, Row, Col, Button, Input, Modal, Form, Cascader } from 'antd';\r\nimport './rbac.less';\r\nimport province from '../../mock/geographic/province.json';\r\nimport city from '../../mock/geographic/city.json';\r\nimport district from '../../mock/geographic/district.json';\r\nimport apiRequest from '../../servers/api/apiRequest';\r\nconst Search = Input.Search;\r\nconst TabPane = Tabs.TabPane;\r\nconst Option = Select.Option;\r\nconst columns = [\r\n  {\r\n    title: '编号',\r\n    dataIndex: 'id'\r\n  }, {\r\n    title: '账号',\r\n    dataIndex: 'account',\r\n  }, {\r\n    title: '角色',\r\n    dataIndex: 'role',\r\n  }, {\r\n    title: '创建时间',\r\n    dataIndex: 'createTime',\r\n  }, {\r\n    title: '状态',\r\n    dataIndex: 'state',\r\n  }, {\r\n    title: '最近登录时间',\r\n    dataIndex: 'lastTime',\r\n  }, {\r\n    title: '操作',\r\n    dataIndex: '',\r\n  }];\r\nconst formItemLayout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 8 },\r\n};\r\n\r\nclass rbac extends Component {\r\n  state = {\r\n    tabPosition: 'left',\r\n    accountData: [],\r\n    pagination: {\r\n      total: 50,\r\n      pageSizeOptions: [10, 20, 30, 40, 50]\r\n    },\r\n    size:10,\r\n    current:0,\r\n    visible: false,\r\n    tabData:[]\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount(){\r\n    var {size,current}=this.state;\r\n    this.queryPage(current,size);\r\n  }\r\n\r\n  queryPage=(current,size)=>{\r\n    let promise = apiRequest.all(\"adminQueryPage\", \"/\"+current+\"/\"+size, null, \"服务器繁忙请稍后重试！\");\r\n    var thic =this;\r\n    promise.then(function (value) {\r\n      if (value.code === 1) {\r\n        let total = value.count;\r\n        let pageSize=Math.round(total/size);\r\n        let pageSizeOptions = [];\r\n        for(let i=0;i<pageSize;i++){\r\n          pageSizeOptions.push(size*i);\r\n        }\r\n        let pagination={\r\n          total: total,\r\n          pageSizeOptions:pageSizeOptions\r\n        }\r\n        thic.setState({\r\n          tabData: value.data,\r\n          pagination: pagination\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  addUser = (e) => { //添加用户\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        var data = {\r\n          account: values.account,\r\n          province: values.p_c[0],\r\n          city: values.p_c[1],\r\n          roleid: values.roleid[0],\r\n          name: values.name,\r\n          phone: values.phone\r\n        };\r\n        let thic = this;\r\n        let promise = apiRequest.all(\"saveAdmin\", data, \"添加成功\", null);\r\n        promise.then(function (value) {\r\n          if (value.code === 1) {\r\n            thic.setState({\r\n              loading: false,\r\n              visible: false\r\n            });\r\n          }\r\n        })\r\n      }\r\n    });\r\n    this.setState({\r\n      loading: true\r\n    });\r\n  }\r\n\r\n  showModal = () => {\r\n    this.getRole();\r\n    this.setState({\r\n      visible: true,\r\n      loading: false\r\n    });\r\n  }\r\n\r\n  getRole = () => {\r\n    var roles = [{\r\n      label: \"代理商\",\r\n      value: 1\r\n    }, {\r\n      label: \"企业用户\",\r\n      value: 2\r\n    }];\r\n    this.setState({\r\n      roles: roles\r\n    })\r\n  }\r\n\r\n\r\n\r\n  handleCancel = (e) => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  }\r\n  handleSelectChange = (value) => {\r\n    this.props.form.setFieldsValue({\r\n      note: `Hi, ${value === 'male' ? 'man' : 'lady'}!`,\r\n    });\r\n  }\r\n  render() {\r\n    const { tabs, options, roles, loading,tabData } = this.state;\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <div style={{ background: '#fff', height: '100%' }}>\r\n        {/* 添加、更新用户 */}\r\n        <Modal\r\n          visible={this.state.visible}\r\n          onOk={this.addUser}\r\n          onCancel={this.handleCancel}\r\n          closable={false}\r\n          destroyOnClose={true}\r\n          footer={[\r\n            <Button key=\"back\" onClick={this.handleCancel}>取消</Button>,\r\n            <Button key=\"submit\" type=\"primary\" loading={loading} onClick={this.addUser}>\r\n              提交\r\n            </Button>,\r\n          ]}\r\n        >\r\n          <Form >\r\n            <Form.Item\r\n              label=\"账号\"\r\n              required\r\n              {...formItemLayout}\r\n            >\r\n              {getFieldDecorator('account', {\r\n                rules: [{ required: true, message: '请填写您的账号' }],\r\n              })(\r\n                <Input placeholder=\"请输入账号\" type=\"text\" />\r\n              )}\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n        <Tabs tabPosition={this.state.tabPosition} tabBarGutter={10} animated style={{ height: '75vh', width: '100%' }}>\r\n          <TabPane tab=\"账号管理\" key=\"1\">\r\n            <div className=\"tabPane\">\r\n              <Row gutter={32} style={{ padding: '1rem  0 1rem 0' }}>\r\n                <Col span={12} style={{ paddingLeft: '0' }}>  <Search\r\n                  placeholder=\"账号、编号查询\"\r\n                  onSearch={value => console.log(value)}\r\n                  style={{ width: 200 }}\r\n                /></Col>\r\n                <Col span={11} style={{ textAlign: 'right', paddingRight: '0' }}><Button type=\"primary\" onClick={this.showModal}>添加</Button></Col>\r\n              </Row>\r\n              <Row gutter={32}>\r\n                <Table\r\n                  dataSource={tabData}\r\n                  columns={columns}\r\n                  rowKey={record => record.login.uuid}\r\n                  pagination={this.state.pagination}\r\n                  loading={this.state.loading}\r\n                  onChange={this.handleTableChange}\r\n                  style={{ marginRight: '24px' }}\r\n                />\r\n              </Row>\r\n            </div>\r\n          </TabPane>\r\n          <TabPane tab=\"功能权限\" key=\"3\">\r\n\r\n          </TabPane>\r\n          <TabPane tab=\"数据权限\" key=\"2\">\r\n\r\n          </TabPane>\r\n        </Tabs>\r\n      </div >\r\n    )\r\n  }\r\n}\r\nexport default Form.create()(rbac);"]},"metadata":{},"sourceType":"module"}