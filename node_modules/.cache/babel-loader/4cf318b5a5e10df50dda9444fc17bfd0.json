{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\3.\\u516C\\u53F8\\u9879\\u76EE\\\\4.\\u5149\\u5B50\\u5934\\u6761\\\\gztt_sys\\\\src\\\\pages\\\\rbac\\\\rbac.js\";\nimport React, { Component } from 'react';\nimport { Tabs, Select, Table, Row, Col, Button, Input, Modal, Form, Badge } from 'antd';\nimport './rbac.less';\nimport province from '../../mock/geographic/province.json';\nimport city from '../../mock/geographic/city.json';\nimport district from '../../mock/geographic/district.json';\nimport apiRequest from '../../servers/api/apiRequest';\nvar Search = Input.Search;\nvar TabPane = Tabs.TabPane;\nvar Option = Select.Option;\nvar columns = [{\n  title: '编号',\n  dataIndex: 'id',\n  key: 'id',\n  render: function render(text, record, index) {\n    return index + 1;\n  }\n}, {\n  title: '账号',\n  dataIndex: 'account',\n  key: 'account'\n}, {\n  title: '角色',\n  dataIndex: 'role',\n  key: 'role'\n}, {\n  title: '创建时间',\n  dataIndex: 'createTime',\n  key: 'createTime',\n  render: function render(text, record, index) {\n    return new Date(text).toLocaleString();\n  }\n}, {\n  title: '状态',\n  dataIndex: 'state',\n  key: 'state',\n  render: function render(text, record, index) {\n    switch (text) {\n      case 0:\n        return React.createElement(\"span\", {\n          style: {\n            color: '#52c41a'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, React.createElement(Badge, {\n          status: \"success\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }), \"\\u6B63\\u5E38\");\n        break;\n\n      case 1:\n        return React.createElement(\"span\", {\n          style: {\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, React.createElement(Badge, {\n          status: \"error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }), \"\\u51BB\\u7ED3\");\n        break;\n\n      default:\n        return \"未知\";\n    }\n  }\n}, {\n  title: '最近登录时间',\n  dataIndex: 'lastTime',\n  key: 'lastTime',\n  render: function render(text, record, index) {\n    if (text != null && text.length > 0) {\n      return new Date(text).toLocaleString();\n    }\n  }\n}, {\n  title: '操作',\n  dataIndex: '',\n  key: 'caozuo'\n}];\nvar formItemLayout = {\n  labelCol: {\n    span: 4\n  },\n  wrapperCol: {\n    span: 8\n  }\n};\n\nvar rbac =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(rbac, _Component);\n\n  function rbac(props) {\n    var _this;\n\n    _classCallCheck(this, rbac);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(rbac).call(this, props));\n    _this.state = {\n      tabPosition: 'left',\n      accountData: [],\n      pagination: {\n        total: 0,\n        pageSize: 10\n      },\n      current: 0,\n      visible: false,\n      tabData: [],\n      roles: []\n    };\n\n    _this.queryPage = function (current, size, name) {\n      //分页查询数据\n      var promise = apiRequest.all(\"adminQueryPage\", current + \"/\" + size + (name != undefined ? \"?name=\" + name : \"\"), null, \"服务器繁忙请稍后重试！\");\n\n      var thic = _assertThisInitialized(_assertThisInitialized(_this));\n\n      promise.then(function (value) {\n        if (value.code === 1) {\n          var pagination = thic.state.pagination;\n          pagination.total = value.data.count;\n          pagination.onChange = thic.paging.bind(this);\n          thic.setState({\n            tabData: value.data.data,\n            pagination: thic.state.pagination\n          });\n        }\n      });\n    };\n\n    _this.addUser = function (e) {\n      //添加用户\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log(values);\n          var data = {\n            account: values.account\n          };\n\n          var thic = _assertThisInitialized(_assertThisInitialized(_this));\n\n          var promise = apiRequest.all(\"saveAdmin\", data, \"添加成功\", null);\n          promise.then(function (value) {\n            if (value.code === 1) {\n              thic.setState({\n                loading: false,\n                visible: false\n              });\n            }\n          });\n        }\n      });\n\n      _this.setState({\n        loading: true\n      });\n    };\n\n    _this.showModal = function () {\n      _this.getRole();\n\n      _this.setState({\n        visible: true,\n        loading: false\n      });\n    };\n\n    _this.getRole = function () {\n      var roles = [{\n        label: \"代理商\",\n        value: 1\n      }, {\n        label: \"企业用户\",\n        value: 2\n      }];\n\n      _this.setState({\n        roles: roles\n      });\n    };\n\n    _this.paging = function (page, pageSize) {\n      _this.queryPage((page - 1) * 10, pageSize);\n    };\n\n    _this.handleCancel = function (e) {\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleSelectChange = function (value) {\n      _this.props.form.setFieldsValue({\n        note: \"Hi, \".concat(value === 'male' ? 'man' : 'lady', \"!\")\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(rbac, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var current = this.state.current;\n      this.queryPage(current, this.state.pagination.pageSize);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          tabs = _this$state.tabs,\n          options = _this$state.options,\n          roles = _this$state.roles,\n          loading = _this$state.loading,\n          tabData = _this$state.tabData;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        style: {\n          background: '#fff',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: this.state.visible,\n        onOk: this.addUser,\n        onCancel: this.handleCancel,\n        closable: false,\n        destroyOnClose: true,\n        footer: [React.createElement(Button, {\n          key: \"back\",\n          onClick: this.handleCancel,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, \"\\u53D6\\u6D88\"), React.createElement(Button, {\n          key: \"submit\",\n          type: \"primary\",\n          loading: loading,\n          onClick: this.addUser,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, \"\\u63D0\\u4EA4\")],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(Form.Item, Object.assign({\n        label: \"\\u8D26\\u53F7\",\n        required: true\n      }, formItemLayout, {\n        style: {\n          marginBottom: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), getFieldDecorator('account', {\n        rules: [{\n          required: true,\n          message: '请填写您的账号'\n        }]\n      })(React.createElement(Input, {\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u8D26\\u53F7\",\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }))), React.createElement(Form.Item, Object.assign({\n        label: \"\\u89D2\\u8272\",\n        required: true\n      }, formItemLayout, {\n        style: {\n          marginBottom: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), getFieldDecorator('roleId', {\n        rules: [{\n          required: true,\n          message: '请选择角色'\n        }]\n      })(React.createElement(Select, {\n        style: {\n          width: 120\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, roles.map(function (item, index) {\n        return React.createElement(Option, {\n          value: item.value,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, item.label);\n      })))))), React.createElement(Tabs, {\n        tabPosition: this.state.tabPosition,\n        tabBarGutter: 10,\n        animated: true,\n        style: {\n          height: '75vh',\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(TabPane, {\n        tab: \"\\u8D26\\u53F7\\u7BA1\\u7406\",\n        key: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tabPane\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(Row, {\n        gutter: 32,\n        style: {\n          padding: '1rem  0 1rem 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 12,\n        style: {\n          paddingLeft: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"  \", React.createElement(Search, {\n        placeholder: \"\\u8D26\\u53F7\\u3001\\u7F16\\u53F7\\u67E5\\u8BE2\",\n        onSearch: function onSearch(value) {\n          _this2.queryPage(0, _this2.state.pagination.pageSize, value);\n\n          console.log(value);\n        },\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })), React.createElement(Col, {\n        span: 11,\n        style: {\n          textAlign: 'right',\n          paddingRight: '0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"primary\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\"))), React.createElement(Row, {\n        gutter: 32,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(Table, {\n        dataSource: tabData,\n        columns: columns,\n        pagination: this.state.pagination,\n        loading: this.state.loading,\n        style: {\n          marginRight: '24px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      })))), React.createElement(TabPane, {\n        tab: \"\\u529F\\u80FD\\u6743\\u9650\",\n        key: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }), React.createElement(TabPane, {\n        tab: \"\\u6570\\u636E\\u6743\\u9650\",\n        key: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return rbac;\n}(Component);\n\nexport default Form.create()(rbac);","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\3.公司项目\\4.光子头条\\gztt_sys\\src\\pages\\rbac\\rbac.js"],"names":["React","Component","Tabs","Select","Table","Row","Col","Button","Input","Modal","Form","Badge","province","city","district","apiRequest","Search","TabPane","Option","columns","title","dataIndex","key","render","text","record","index","Date","toLocaleString","color","length","formItemLayout","labelCol","span","wrapperCol","rbac","props","state","tabPosition","accountData","pagination","total","pageSize","current","visible","tabData","roles","queryPage","size","name","promise","all","undefined","thic","then","value","code","data","count","onChange","paging","bind","setState","addUser","e","preventDefault","form","validateFields","err","values","console","log","account","loading","showModal","getRole","label","page","handleCancel","handleSelectChange","setFieldsValue","note","tabs","options","getFieldDecorator","background","height","marginBottom","rules","required","message","width","map","item","padding","paddingLeft","textAlign","paddingRight","marginRight","create"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Tabs, Select, Table, Row, Col, Button, Input, Modal, Form, Badge } from 'antd';\r\nimport './rbac.less';\r\nimport province from '../../mock/geographic/province.json';\r\nimport city from '../../mock/geographic/city.json';\r\nimport district from '../../mock/geographic/district.json';\r\nimport apiRequest from '../../servers/api/apiRequest';\r\nconst Search = Input.Search;\r\nconst TabPane = Tabs.TabPane;\r\nconst Option = Select.Option;\r\nconst columns = [\r\n  {\r\n    title: '编号',\r\n    dataIndex: 'id',\r\n    key: 'id',\r\n    render: (text, record, index) => {\r\n      return index + 1;\r\n    }\r\n  }, {\r\n    title: '账号',\r\n    dataIndex: 'account',\r\n    key: 'account',\r\n  }, {\r\n    title: '角色',\r\n    dataIndex: 'role',\r\n    key: 'role',\r\n  }, {\r\n    title: '创建时间',\r\n    dataIndex: 'createTime',\r\n    key: 'createTime',\r\n    render: (text, record, index) => {\r\n      return new Date(text).toLocaleString();\r\n    }\r\n  }, {\r\n    title: '状态',\r\n    dataIndex: 'state',\r\n    key: 'state',\r\n    render: (text, record, index) => {\r\n      switch (text) {\r\n        case 0:\r\n          return (\r\n            <span style={{ color: '#52c41a' }}><Badge status=\"success\" />正常</span>\r\n          )\r\n          break;\r\n        case 1:\r\n          return (\r\n            <span style={{ color: 'red' }}><Badge status=\"error\" />冻结</span>\r\n          )\r\n          break;\r\n        default:\r\n          return \"未知\"\r\n      }\r\n    }\r\n  }, {\r\n    title: '最近登录时间',\r\n    dataIndex: 'lastTime',\r\n    key: 'lastTime',\r\n    render: (text, record, index) => {\r\n      if (text != null && text.length > 0) {\r\n        return new Date(text).toLocaleString();\r\n      }\r\n    }\r\n  }, {\r\n    title: '操作',\r\n    dataIndex: '',\r\n    key: 'caozuo',\r\n  }];\r\nconst formItemLayout = {\r\n  labelCol: { span: 4 },\r\n  wrapperCol: { span: 8 },\r\n};\r\n\r\nclass rbac extends Component {\r\n  state = {\r\n    tabPosition: 'left',\r\n    accountData: [],\r\n    pagination: {\r\n      total: 0,\r\n      pageSize: 10\r\n    },\r\n    current: 0,\r\n    visible: false,\r\n    tabData: [],\r\n    roles:[]\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n    var { current } = this.state;\r\n    this.queryPage(current, this.state.pagination.pageSize);\r\n  }\r\n\r\n  queryPage = (current, size, name) => { //分页查询数据\r\n    let promise = apiRequest.all(\"adminQueryPage\", current + \"/\" + size + (name != undefined ? \"?name=\" + name : \"\"), null, \"服务器繁忙请稍后重试！\");\r\n    var thic = this;\r\n    promise.then(function (value) {\r\n      if (value.code === 1) {\r\n        let pagination = thic.state.pagination;\r\n        pagination.total = value.data.count;\r\n        pagination.onChange = thic.paging.bind(this)\r\n        thic.setState({\r\n          tabData: value.data.data,\r\n          pagination: thic.state.pagination\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  addUser = (e) => { //添加用户\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        console.log(values);\r\n        var data = {\r\n          account: values.account\r\n        };\r\n        let thic = this;\r\n        let promise = apiRequest.all(\"saveAdmin\", data, \"添加成功\", null);\r\n        promise.then(function (value) {\r\n          if (value.code === 1) {\r\n            thic.setState({\r\n              loading: false,\r\n              visible: false\r\n            });\r\n          }\r\n        })\r\n      }\r\n    });\r\n    this.setState({\r\n      loading: true\r\n    });\r\n  }\r\n\r\n  showModal = () => {\r\n    this.getRole();\r\n    this.setState({\r\n      visible: true,\r\n      loading: false\r\n    });\r\n  }\r\n\r\n  getRole = () => {\r\n    var roles = [{\r\n      label: \"代理商\",\r\n      value: 1\r\n    }, {\r\n      label: \"企业用户\",\r\n      value: 2\r\n    }];\r\n    this.setState({\r\n      roles: roles\r\n    })\r\n  }\r\n\r\n  paging = (page, pageSize) => {\r\n    this.queryPage((page - 1) * 10, pageSize);\r\n  }\r\n\r\n  handleCancel = (e) => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  }\r\n  handleSelectChange = (value) => {\r\n    this.props.form.setFieldsValue({\r\n      note: `Hi, ${value === 'male' ? 'man' : 'lady'}!`,\r\n    });\r\n  }\r\n  render() {\r\n    const { tabs, options, roles, loading, tabData } = this.state;\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <div style={{ background: '#fff', height: '100%' }}>\r\n        {/* 添加、更新用户 */}\r\n        <Modal\r\n          visible={this.state.visible}\r\n          onOk={this.addUser}\r\n          onCancel={this.handleCancel}\r\n          closable={false}\r\n          destroyOnClose={true}\r\n          footer={[\r\n            <Button key=\"back\" onClick={this.handleCancel}>取消</Button>,\r\n            <Button key=\"submit\" type=\"primary\" loading={loading} onClick={this.addUser}>\r\n              提交\r\n            </Button>,\r\n          ]}\r\n        >\r\n          <Form >\r\n            <Form.Item\r\n              label=\"账号\"\r\n              required\r\n              {...formItemLayout}\r\n              style={{ marginBottom: '0' }}\r\n            >\r\n              {getFieldDecorator('account', {\r\n                rules: [{ required: true, message: '请填写您的账号' }],\r\n              })(\r\n                <Input placeholder=\"请输入账号\" type=\"text\" />\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"角色\"\r\n              required\r\n              {...formItemLayout}\r\n              style={{ marginBottom: '0' }}\r\n            >\r\n              {getFieldDecorator('roleId', {\r\n                rules: [{ required: true, message: '请选择角色' }],\r\n              })(\r\n                <Select  style={{ width: 120 }}>\r\n                {\r\n                  roles.map((item,index)=>{\r\n                    return (\r\n                      <Option value={item.value}>{item.label}</Option>\r\n                    )\r\n                  })\r\n                }\r\n                </Select>\r\n              )}\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n        <Tabs tabPosition={this.state.tabPosition} tabBarGutter={10} animated style={{ height: '75vh', width: '100%' }}>\r\n          <TabPane tab=\"账号管理\" key=\"1\">\r\n            <div className=\"tabPane\">\r\n              <Row gutter={32} style={{ padding: '1rem  0 1rem 0' }}>\r\n                <Col span={12} style={{ paddingLeft: '0' }}>  <Search\r\n                  placeholder=\"账号、编号查询\"\r\n                  onSearch={(value) => {\r\n                    this.queryPage(0, this.state.pagination.pageSize, value)\r\n                    console.log(value);\r\n                  }}\r\n                  style={{ width: 200 }}\r\n                /></Col>\r\n                <Col span={11} style={{ textAlign: 'right', paddingRight: '0' }}><Button type=\"primary\" onClick={this.showModal}>添加</Button></Col>\r\n              </Row>\r\n              <Row gutter={32}>\r\n                <Table\r\n                  dataSource={tabData}\r\n                  columns={columns}\r\n                  pagination={this.state.pagination}\r\n                  loading={this.state.loading}\r\n                  style={{ marginRight: '24px' }}\r\n                />\r\n              </Row>\r\n            </div>\r\n          </TabPane>\r\n          <TabPane tab=\"功能权限\" key=\"3\">\r\n\r\n          </TabPane>\r\n          <TabPane tab=\"数据权限\" key=\"2\">\r\n\r\n          </TabPane>\r\n        </Tabs>\r\n      </div >\r\n    )\r\n  }\r\n}\r\nexport default Form.create()(rbac);"]},"metadata":{},"sourceType":"module"}